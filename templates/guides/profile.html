{% extends "base.html" %}

{% block title %}Guide Profile - Tourist Assist{% endblock %}

{% block content %}
<div style="width: 100%; max-width: 700px; padding: 2rem 1rem;">
    {% if error %}
    <div
        style="background: rgba(239, 68, 68, 0.1); border: 2px solid rgba(239, 68, 68, 0.3); color: #f87171; padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem; text-align: center;">
        <p style="font-size: 1rem; margin: 0;">âŒ {{ error }}</p>
        <p style="font-size: 0.9rem; color: var(--text-dim); margin-top: 0.5rem;">You can only view your own profile.
        </p>
        <a href="{% url 'booking-system' %}"
            style="display: inline-block; margin-top: 1rem; padding: 0.5rem 1rem; background: var(--accent-color); color: white; text-decoration: none; border-radius: 6px; font-weight: 600;">
            â† Back to Services
        </a>
    </div>
    {% else %}

    <div style="text-align: center; margin-bottom: 2rem;">
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ—ºï¸ Guide Profile</h1>
        <p style="color: var(--text-dim);">Your registered guide information</p>
    </div>

    {% if guide.profile_photo %}
    <div style="text-align: center; margin-bottom: 2rem;">
        <img src="{{ guide.profile_photo.url }}" alt="Profile Photo"
            style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 3px solid var(--accent-color);">
    </div>
    {% endif %}

    <div class="glass"
        style="padding: 2rem; border-radius: 20px; background: var(--glass-bg); border: 1px solid var(--glass-border); margin-bottom: 2rem;">

        <!-- Basic Information -->
        <h2
            style="font-size: 1.3rem; margin-bottom: 1rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem; color: var(--accent-color);">
            Personal Details</h2>

        <div style="margin-bottom: 1.2rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">Full Name</p>
            <p style="font-size: 1.1rem; font-weight: 600; color: var(--text-main);">{{ guide.full_name }}</p>
        </div>

        <div style="margin-bottom: 1.2rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ“ Location</p>
            <p style="font-size: 1rem; color: var(--text-main);">{{ guide.location }}</p>
        </div>

        <div style="margin-bottom: 1.2rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ—£ï¸ Languages Known</p>
            <p style="font-size: 1rem; color: var(--text-main);">{{ guide.languages_known }}</p>
        </div>

        <!-- Professional Information -->
        <h2
            style="font-size: 1.3rem; margin-bottom: 1rem; margin-top: 2rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem; color: var(--accent-color);">
            Professional Info</h2>

        <div style="margin-bottom: 1.2rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ“… Experience</p>
            <p style="font-size: 1rem; color: var(--text-main);">{{ guide.experience_years }} years</p>
        </div>

        {% if guide.specialization %}
        <div style="margin-bottom: 1.2rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ¯ Specialization</p>
            <p style="font-size: 1rem; color: var(--text-main);">{{ guide.specialization }}</p>
        </div>
        {% endif %}

        <!-- Pricing and Contact -->
        <h2
            style="font-size: 1.3rem; margin-bottom: 1rem; margin-top: 2rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem; color: var(--accent-color);">
            Pricing & Contact</h2>

        <div style="margin-bottom: 1.2rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ’° Price per Day</p>
            <p style="font-size: 1.4rem; font-weight: 700; color: var(--accent-color);">â‚¹{{ guide.price_per_day }}</p>
        </div>

        <div style="margin-bottom: 1.2rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ“± Contact Number</p>
            <p style="font-size: 1.1rem; color: var(--text-main);">{{ guide.contact_number }}</p>
        </div>

        <!-- Verification Documents -->
        {% if guide.id_proof or guide.profile_photo %}
        <h2
            style="font-size: 1.3rem; margin-bottom: 1rem; margin-top: 2rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem; color: var(--accent-color);">
            Verification Status</h2>

        {% if guide.profile_photo %}
        <div style="margin-bottom: 1rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ“¸ Profile Photo</p>
            <p style="font-size: 0.9rem; color: #4ade80; font-weight: 500;">âœ“ Successfully Uploaded</p>
        </div>
        {% endif %}

        {% if guide.id_proof %}
        <div style="margin-bottom: 1rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸªª ID Proof</p>
            <p style="font-size: 0.9rem; color: #4ade80; font-weight: 500;">âœ“ Successfully Uploaded</p>
        </div>
        {% endif %}
        {% endif %}

        <!-- Timestamps -->
        <h2
            style="font-size: 1.3rem; margin-bottom: 1rem; margin-top: 2rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem; color: var(--accent-color);">
            Timestamps</h2>

        <div style="margin-bottom: 1rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ“… Registered On</p>
            <p style="font-size: 0.95rem; color: var(--text-main);">{{ guide.created_at|date:"M d, Y - h:i A" }}</p>
        </div>

        <div style="margin-bottom: 1rem;">
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.3rem;">ğŸ”„ Last Updated</p>
            <p style="font-size: 0.95rem; color: var(--text-main);">{{ guide.updated_at|date:"M d, Y - h:i A" }}</p>
        </div>

    </div>

    <!-- Action Buttons -->
    {% if is_owner %}

    {% if pending_update %}
    <div
        style="background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); color: #fbbf24; padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem; text-align: center;">
        <p style="font-size: 1rem; margin: 0; font-weight: 600;">â³ Update Pending Approval</p>
        <p style="font-size: 0.9rem; color: var(--text-dim); margin-top: 0.5rem;">You have submitted changes to your
            profile. Once the admin reviews and approves them, they will be applied here.</p>
        <a href="{% url 'guide-update' guide.id %}"
            style="display: inline-block; margin-top: 1rem; padding: 0.5rem 1rem; background: var(--accent-color); color: white; text-decoration: none; border-radius: 6px; font-weight: 600;">
            âœï¸ Manage Pending Update
        </a>
    </div>
    {% endif %}

    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="{% url 'guide-update' guide.id %}"
            style="flex: 1; min-width: 150px; padding: 0.75rem; background: linear-gradient(135deg, #38bdf8, #818cf8); border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer; text-decoration: none; text-align: center; display: flex; align-items: center; justify-content: center;">
            âœï¸ Edit Profile
        </a>
        <a href="{% url 'booking-system' %}?type=GUIDE"
            style="flex: 1; min-width: 150px; padding: 0.75rem; background: rgba(255,255,255,0.06); border: 1px solid var(--glass-border); border-radius: 8px; color: var(--text-dim); text-decoration: none; text-align: center; font-weight: 600; display: flex; align-items: center; justify-content: center;">
            â† Back to Guides
        </a>
    </div>
    {% else %}
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        {% if guide.service %}
        <a href="{% url 'initiate-booking' guide.service.id %}"
            style="flex: 2; min-width: 200px; padding: 0.75rem; background: var(--accent-color); border: none; border-radius: 8px; color: black; font-weight: 700; cursor: pointer; text-decoration: none; text-align: center; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 14px 0 rgba(56, 189, 248, 0.39);">
            ğŸš€ Book This Guide Now
        </a>
        {% endif %}
        <a href="{% url 'booking-system' %}?type=GUIDE"
            style="flex: 1; min-width: 150px; padding: 0.75rem; background: rgba(255,255,255,0.06); border: 1px solid var(--glass-border); border-radius: 8px; color: var(--text-dim); text-decoration: none; text-align: center; font-weight: 600; display: flex; align-items: center; justify-content: center;">
            â† Back to Guides
        </a>
    </div>
    {% endif %}

    {% endif %}
</div>

<style>
    .glass {
        backdrop-filter: blur(10px);
        animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>
{% endblock %}